<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Stadium Design Showcase — Digital Book</title>
<style>
  :root{
    --bg:#e9f2f9;         /* lighter blue backdrop */
    --brand:#1e6aa8;      /* MPDC-ish blue (lighter) */
    --brand-ink:#0c2d45;  /* dark ink */
    --accent:#c8a86b;     /* gold accent */
    --page:#ffffff;
    --muted:#5a6b78;
    --border:#e4ecf3;
  }
  html,body{margin:0;height:100%;font-family:Arial,Helvetica,sans-serif;color:var(--brand-ink)}
  body{background:linear-gradient(180deg,var(--bg) 0,#f2f6fa 280px,#f7fafc 280px)}
  /* Header / Nav */
  header{
    position:sticky; top:0; z-index:1000;
    background:linear-gradient(180deg,#ffffff 0,#f6fbff 100%);
    border-bottom:1px solid var(--border);
    box-shadow:0 2px 12px rgba(0,0,0,.06);
  }
  .head-inner{
    max-width:1200px; margin:0 auto; padding:10px 14px;
    display:flex; align-items:center; gap:14px;
  }
  .brand-wrap{display:flex; align-items:center; gap:12px}
  .brand-wrap img{height:36px; width:auto; border-radius:4px}
  .brand-title{font-weight:700; letter-spacing:.3px; color:var(--brand-ink)}
  .spacer{flex:1}
  .nav{
    display:flex; gap:10px; align-items:center;
  }
  .nav > .menu{
    position:relative;
  }
  .menu > button, .menu > a{
    appearance:none; border:1px solid var(--border);
    background:#fff; color:var(--brand-ink);
    border-radius:10px; padding:8px 12px; cursor:pointer;
    font-weight:600;
    box-shadow:0 1px 4px rgba(0,0,0,.04);
  }
  .menu > button:hover, .menu > a:hover{border-color:#d8e5ef}
  .dropdown{
    position:absolute; top:44px; left:0;
    background:#fff; border:1px solid var(--border);
    border-radius:12px; box-shadow:0 10px 26px rgba(0,0,0,.12);
    min-width:260px; display:none; max-height:60vh; overflow:auto;
  }
  .menu.open .dropdown{display:block}
  .dropdown h4{
    margin:10px 12px 6px; font-size:13px; color:#486072; text-transform:uppercase; letter-spacing:.6px;
  }
  .dropdown a{
    display:block; padding:8px 12px; text-decoration:none; color:#1f2d36; border-radius:8px; margin:4px 8px;
  }
  .dropdown a:hover{background:#f2f7fb}
  .wrap{max-width:1200px; margin:0 auto; padding:16px}
  .book{
    background:var(--page); border-radius:14px;
    box-shadow:0 14px 34px rgba(16,40,60,.12);
    min-height:calc(100vh - 300px);
    position:relative; overflow:hidden; border:1px solid var(--border);
  }
  .toolbar{
    display:flex; gap:10px; align-items:center; padding:12px;
    border-bottom:1px solid var(--border); background:#ffffffc7; backdrop-filter:saturate(1.2) blur(3px);
  }
  .toolbar .title{font-weight:800; letter-spacing:.2px}
  .toolbar .pill{
    background:#eef5fb; color:#2d3a44; padding:6px 10px; border-radius:999px; font-size:12px;
  }
  .paper{min-height:calc(100vh - 300px - 56px); display:grid; place-items:center; background:#fff}
  .page{max-width:1000px; width:100%; padding:18px}
  .inner{border:1px solid var(--border); border-radius:12px; padding:20px}
  .inner.cover{
    background:
      radial-gradient(900px 400px at 70% 10%, rgba(200,168,107,.14), rgba(255,255,255,0)),
      linear-gradient(180deg,#ffffff 0,#fbfdff 100%);
    text-align:center; padding:48px 22px;
  }
  .cover .kicker{
    display:inline-block; background:#eef5fb; color:#1e6aa8;
    padding:6px 10px; border-radius:999px; font-weight:700; margin-bottom:12px; letter-spacing:.3px;
  }
  h1{margin:8px 0 6px; font-size:36px} .sub{color:var(--muted); font-size:16px}
  figure{margin:0} figure img{width:100%; height:auto; border-radius:10px}
  figcaption{margin-top:8px; color:#2d3a44; font-size:14px}
  iframe{width:100%; aspect-ratio:16/9; border:0; border-radius:10px;}
  .navbtn{
    position:absolute; top:50%; transform:translateY(-50%);
    background:#fff; border:1px solid var(--border); border-radius:10px;
    padding:10px 12px; cursor:pointer; font-weight:700;
    box-shadow:0 6px 16px rgba(0,0,0,.08);
  }
  #prev{left:12px} #next{right:12px}
  .hint{font-size:12px; color:#6a7b88; margin-top:6px}
  footer{color:#6f8aa0; padding:18px; text-align:center}
  @media (max-width:760px){
    h1{font-size:28px}
  }
</style>
</head>
<body>
<header>
  <div class="head-inner">
    <div class="brand-wrap">
      <img src="assets/mpdc-logo.png" alt="MPDC" onerror="this.style.display='none'">
      <div class="brand-title">Macquarie Point Development Corporation</div>
    </div>
    <div class="spacer"></div>
    <nav class="nav">
      <div class="menu" id="menuBoards">
        <button type="button">Display Boards ▾</button>
        <div class="dropdown" id="ddBoards">
          <h4>Display Boards</h4>
          <div id="boardsList"></div>
        </div>
      </div>
      <div class="menu" id="menuVideos">
        <button type="button">Videos ▾</button>
        <div class="dropdown" id="ddVideos">
          <h4>Videos</h4>
          <div id="videosList"></div>
        </div>
      </div>
      <div class="menu"><a href="#" id="jumpPlans">Plans</a></div>
      <div class="menu"><a href="#" id="jumpLinks">Links</a></div>
    </nav>
  </div>
</header>

<div class="wrap">
  <div class="book">
    <div class="toolbar">
      <div class="title">Stadium Design Showcase — Digital Book</div>
      <div class="spacer"></div>
      <span class="pill" id="ind">Page 1 / 1</span>
    </div>
    <div class="paper">
      <div class="page"><div class="inner cover" id="inner">
        <!-- Cover fallback content (replaced by JS) -->
      </div></div>
      <button class="navbtn" id="prev">‹ Prev</button>
      <button class="navbtn" id="next">Next ›</button>
    </div>
  </div>
</div>

<footer>© 2025 Macquarie Point Development Corporation</footer>

<script>
  // ------------------ CONFIG ------------------
  const CACHE_BUST = '?v=4'; // cache-buster for Netlify refreshes

  // Your 39 Display Boards (already in your repo)
  const DISPLAY_BOARD_FILES = [
    // Set 1
    "assets/boards/boards1_01.jpg","assets/boards/boards1_02.jpg","assets/boards/boards1_03.jpg",
    "assets/boards/boards1_04.jpg","assets/boards/boards1_05.jpg","assets/boards/boards1_06.jpg",
    "assets/boards/boards1_07.jpg","assets/boards/boards1_08.jpg","assets/boards/boards1_09.jpg","assets/boards/boards1_10.jpg",
    // Set 2
    "assets/boards/boards2_01.jpg","assets/boards/boards2_02.jpg","assets/boards/boards2_03.jpg",
    "assets/boards/boards2_04.jpg","assets/boards/boards2_05.jpg","assets/boards/boards2_06.jpg",
    "assets/boards/boards2_07.jpg","assets/boards/boards2_08.jpg","assets/boards/boards2_09.jpg","assets/boards/boards2_10.jpg",
    // Set 3 (Open House boards)
    "assets/boards/boards3_01.jpg","assets/boards/boards3_02.jpg","assets/boards/boards3_03.jpg",
    "assets/boards/boards3_04.jpg","assets/boards/boards3_05.jpg","assets/boards/boards3_06.jpg",
    "assets/boards/boards3_07.jpg","assets/boards/boards3_08.jpg","assets/boards/boards3_09.jpg"
  ];

  // Your 9 YouTube links (converted to embed URLs automatically)
  const YT_LINKS = [
    "https://youtu.be/Zx76BnLkNlY",
    "https://youtu.be/KcSXlcSaL_8",
    "https://youtu.be/zskCZeWZ-xo",
    "https://youtu.be/nJqy5tg7z_o",
    "https://youtu.be/mJzHTXnSrb8",
    "https://youtu.be/waWApjh_snA",
    "https://youtu.be/84pkAhplxIY",
    "https://youtu.be/NSc6u8vX-cQ",
    "https://youtu.be/zM63SF3_8fI"
  ];

  // MPDC social links (add real URLs when ready)
  const SOCIALS = [
    {label:"Facebook", href:"#"},
    {label:"Instagram", href:"#"},
    {label:"LinkedIn", href:"#"},
    {label:"YouTube", href:"#"}
  ];

  // -------------- HELPERS & PAGES --------------
  const toEmbed = (u) => {
    try{
      // supports youtu.be/<id> and youtube.com/watch?v=<id>
      const url = new URL(u);
      if (url.hostname === 'youtu.be') return `https://www.youtube.com/embed/${url.pathname.slice(1)}`;
      if (url.hostname.includes('youtube.com')) return `https://www.youtube.com/embed/${url.searchParams.get('v')}`;
    }catch(e){}
    return u;
  };

  function robustImg(src){
    const img = document.createElement('img');
    const candidates = [src, src.replace('.jpg','.JPG'), src.replace('.jpg','.jpeg'), src.replace('.jpg','.JPEG')];
    let idx = 0;
    function tryNext(){
      if(idx>=candidates.length){
        const wrap = document.createElement('div');
        wrap.style.padding = '12px';
        wrap.style.background = '#fff6f6';
        wrap.style.border = '1px solid #f1d6d6';
        wrap.style.borderRadius = '8px';
        wrap.innerHTML = `<strong>Missing image:</strong> ${src}<br><small>Check filename & extension in <code>assets/boards/</code>.</small>`;
        return wrap;
      }
      const attempt = candidates[idx] + CACHE_BUST;
      img.src = attempt;
      img.onerror = () => { idx++; const rep = tryNext(); if (rep) inner.appendChild(rep); };
      img.onload = () => {};
      return null;
    }
    const rep = tryNext();
    if (rep) return rep;
    return img;
  }

  const PAGES = [
    { type:"cover", title:"STADIUM DESIGN SHOWCASE", subtitle:"31 Oct – 5 Nov · The Goods Shed, Hobart" },
    ...DISPLAY_BOARD_FILES.map((src,i)=>({type:"image", src, caption:`Display Board ${i+1}`})),
    ...YT_LINKS.map((u,ix)=>({type:"youtube", title:`Video ${ix+1}`, url: toEmbed(u)})),
    { type:"plans", caption:"Architectural Plans" },
    { type:"links", items:[
      { text:"FAQ: Stadium — Find out more", href:"https://www.macpoint.com/stadium-find-out-more" },
      { text:"Mac Point website", href:"https://www.macpoint.com" }
    ]}
  ];

  // -------------- RENDER CORE --------------
  let i = 0;
  const inner = document.getElementById('inner');
  const ind = document.getElementById('ind');

  function render(){
    const p = PAGES[i]; inner.className = 'inner'; inner.innerHTML = '';
    if(!p) return;

    if(p.type==='cover'){
      inner.classList.add('cover');
      inner.innerHTML = `
        <div class="kicker">Macquarie Point Development Corporation</div>
        <h1>${p.title}</h1>
        <div class="sub">${p.subtitle}</div>
        <div class="hint" style="margin-top:14px">Use ← / → keys, Next/Prev, or the menu to jump anywhere.</div>
      `;
      ind.textContent = `Page ${i+1} / ${PAGES.length}`;
      return;
    }

    if(p.type==='image'){
      const f = document.createElement('figure');
      const imgEl = robustImg(p.src);
      imgEl.alt = p.caption || 'Display Board';
      const cap = document.createElement('figcaption'); cap.textContent = p.caption || '';
      f.appendChild(imgEl); f.appendChild(cap); inner.appendChild(f);
    }

    if(p.type==='youtube'){
      const iframe = document.createElement('iframe');
      iframe.src = p.url;
      iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
      inner.appendChild(iframe);
      const caption = document.createElement('div'); caption.className='hint'; caption.textContent = p.title; inner.appendChild(caption);
    }

    if(p.type==='plans'){
      inner.innerHTML = '<h2>Architectural Plans</h2><p class="sub">Add plan images to <code>assets/plans/</code> and list them in <code>assets/plans.json</code>.</p>';
    }

    if(p.type==='links'){
      let html = '<h2>Links & Further Information</h2><ul>';
      (p.items||[]).forEach(it => { html += `<li><a href="${it.href}" target="_blank" rel="noopener">${it.text}</a></li>`; });
      html += '</ul>';
      html += '<h3>MPDC Socials</h3><ul>';
      SOCIALS.forEach(s => { html += `<li><a href="${s.href}" target="_blank" rel="noopener">${s.label}</a></li>`; });
      html += '</ul>';
      inner.innerHTML = html;
    }

    ind.textContent = `Page ${i+1} / ${PAGES.length}`;
  }

  function prev(){ if(i>0){ i--; render(); } }
  function next(){ if(i<PAGES.length-1){ i++; render(); } }
  document.getElementById('prev').onclick = prev;
  document.getElementById('next').onclick = next;
  document.addEventListener('keydown', e=>{ if(e.key==='ArrowLeft') prev(); if(e.key==='ArrowRight') next(); });

  // -------------- MENU WIRING --------------
  const menuBoards = document.getElementById('menuBoards');
  const ddBoards = document.getElementById('ddBoards');
  const boardsList = document.getElementById('boardsList');
  const menuVideos = document.getElementById('menuVideos');
  const ddVideos = document.getElementById('ddVideos');
  const videosList = document.getElementById('videosList');

  function closeMenus(e){
    if(!e) return;
    const m1 = e.target.closest('#menuBoards'); const m2 = e.target.closest('#menuVideos');
    if(!m1) menuBoards.classList.remove('open');
    if(!m2) menuVideos.classList.remove('open');
  }
  document.addEventListener('click', closeMenus);

  menuBoards.querySelector('button').addEventListener('click', (e)=>{
    e.stopPropagation();
    menuBoards.classList.toggle('open');
    menuVideos.classList.remove('open');
  });
  menuVideos.querySelector('button').addEventListener('click', (e)=>{
    e.stopPropagation();
    menuVideos.classList.toggle('open');
    menuBoards.classList.remove('open');
  });

  // Build Display Boards dropdown (labels: Display Board 1…)
  boardsList.innerHTML = '';
  DISPLAY_BOARD_FILES.forEach((src, idx)=>{
    const a = document.createElement('a');
    a.href = '#';
    a.textContent = `Display Board ${idx+1}`;
    a.onclick = (ev)=>{ ev.preventDefault(); i = 1 + idx; render(); menuBoards.classList.remove('open'); };
    boardsList.appendChild(a);
  });

  // Build Videos dropdown
  videosList.innerHTML = '';
  YT_LINKS.forEach((u, ix)=>{
    const a = document.createElement('a');
    a.href = '#';
    a.textContent = `Video ${ix+1}`;
    a.onclick = (ev)=>{ ev.preventDefault();
      // cover is index 0; boards are 1..N; videos start at (1 + DISPLAY_BOARD_FILES.length)
      i = 1 + DISPLAY_BOARD_FILES.length + ix;
      render(); menuVideos.classList.remove('open');
    };
    videosList.appendChild(a);
  });

  // Jump links
  document.getElementById('jumpPlans').addEventListener('click',(e)=>{
    e.preventDefault();
    i = 1 + DISPLAY_BOARD_FILES.length + YT_LINKS.length;
    render();
  });
  document.getElementById('jumpLinks').addEventListener('click',(e)=>{
    e.preventDefault();
    i = 1 + DISPLAY_BOARD_FILES.length + YT_LINKS.length + 1;
    render();
  });

  // Init
  render();

  // Touch swipe
  let startX=null; const paper=document.querySelector('.paper');
  paper.addEventListener('touchstart', e=>{startX=e.changedTouches[0].screenX;}, {passive:true});
  paper.addEventListener('touchend', e=>{
    if(startX==null) return;
    const dx=e.changedTouches[0].screenX-startX;
    if(dx<-40) next(); if(dx>40) prev();
    startX=null;
  }, {passive:true});
</script>
</body></html>
